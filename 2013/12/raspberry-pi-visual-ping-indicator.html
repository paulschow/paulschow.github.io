


<!DOCTYPE html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"
><head>
  <meta charset="utf-8" />
  
    <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="rgb(255,255,255)" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Raspberry Pi Visual Ping Indicator / Roommate Tracker &middot; Paul&#39;s Projects</title>
    <meta name="title" content="Raspberry Pi Visual Ping Indicator / Roommate Tracker &middot; Paul&#39;s Projects" />
  
  <meta name="description" content="A frequent problem in my apartment is the lack of a consistent sleep schedule among my roommates." />
  
  
  
  <link rel="canonical" href="https://paulschow.com/2013/12/raspberry-pi-visual-ping-indicator.html" />
  
  
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.9a3c55add7114104f4403b9784a2fea7343e1785bbc807491f6d70233f97a907d15c2d558e81a8220f9c7b777731a662989704838e02e9e7cac019fd25e5d6b8.css"
    integrity="sha512-mjxVrdcRQQT0QDuXhKL&#43;pzQ&#43;F4W7yAdJH21wIz&#43;XqQfRXC1VjoGoIg&#43;ce3d3MaZimJcEg44C6efKwBn9JeXWuA=="
  />
  
  
  <script type="text/javascript" src="/js/appearance.min.75869c865625ed3d10fe38f2274fa90938094d28b518ee2088f544a29fe6b826626bae550302adcbde61e83ba341bdd928a250d644367723ce01e798033098c5.js" integrity="sha512-dYachlYl7T0Q/jjyJ0&#43;pCTgJTSi1GO4giPVEop/muCZia65VAwKty95h6DujQb3ZKKJQ1kQ2dyPOAeeYAzCYxQ=="></script>
  
  
  
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Raspberry Pi Visual Ping Indicator / Roommate Tracker" />
<meta property="og:description" content="A frequent problem in my apartment is the lack of a consistent sleep schedule among my roommates." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://paulschow.com/2013/12/raspberry-pi-visual-ping-indicator.html" /><meta property="og:image" content="https://paulschow.com/2013/12/cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-12-28T14:14:00-07:00" />
<meta property="article:modified_time" content="2013-12-28T14:14:00-07:00" /><meta property="og:site_name" content="Paul&#39;s Projects" />


  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://paulschow.com/2013/12/cover.png"/>
<meta name="twitter:title" content="Raspberry Pi Visual Ping Indicator / Roommate Tracker"/>
<meta name="twitter:description" content="A frequent problem in my apartment is the lack of a consistent sleep schedule among my roommates."/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Raspberry Pi Visual Ping Indicator \/ Roommate Tracker",
    "headline": "Raspberry Pi Visual Ping Indicator \/ Roommate Tracker",
    
    "abstract": "A frequent problem in my apartment is the lack of a consistent sleep schedule among my roommates.",
    "inLanguage": "en",
    "url" : "https:\/\/paulschow.com\/2013\/12\/raspberry-pi-visual-ping-indicator.html",
    "author" : {
      "@type": "Person",
      "name": "Paul Schow"
    },
    "copyrightYear": "2013",
    "dateCreated": "2013-12-28T14:14:00-07:00",
    "datePublished": "2013-12-28T14:14:00-07:00",
    
    "dateModified": "2013-12-28T14:14:00-07:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "433"
  }]
  </script>


  
  <meta name="author" content="Paul Schow" />
  
    
      <link href="https://twitter.com/weirdguy" rel="me" />
    
  
  
  






  
  
  
  


  
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content"
        ><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400"
          >&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10">
  <nav class="flex items-start justify-between sm:items-center">
    
    <div class="flex flex-row items-center">
      
  <a
    class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
    rel="me"
    href="/"
    >Paul&rsquo;s Projects</a
  >

      

    </div>
    
    
      <ul class="flex list-none flex-col ltr:text-right rtl:text-left sm:flex-row">
        
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/posts/"
                title="Posts"
                >Blog</a
              >
            </li>
          
        
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Raspberry Pi Visual Ping Indicator / Roommate Tracker
      </h1>
      <div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
    
  

  

  

  
    
  

  

  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2013-12-28 14:14:00.001 -0700 MST">28 December 2013</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">3 mins</span>
    

    
    
  </div>

  
  


      </div>
      
        <img
          class="mb-6 -mt-4 rounded-md"
          srcset="/2013/12/cover_hu81064bae4ea83fb22e9e815a5cf1da40_246758_330x0_resize_box_3.png 330w,/2013/12/cover_hu81064bae4ea83fb22e9e815a5cf1da40_246758_660x0_resize_box_3.png 660w,/2013/12/cover_hu81064bae4ea83fb22e9e815a5cf1da40_246758_1024x0_resize_box_3.png 1024w,/2013/12/cover_hu81064bae4ea83fb22e9e815a5cf1da40_246758_1320x0_resize_box_3.png 2x"
          src="/2013/12/cover_hu81064bae4ea83fb22e9e815a5cf1da40_246758_660x0_resize_box_3.png"
        />
      
    </header>
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      <div class="min-w-0 min-h-0 max-w-prose grow">
        <p>A frequent problem in my apartment is the lack of a consistent sleep schedule among my roommates. It&rsquo;s hard to tell when someone is asleep in their room, and when someone is gone and their door is closed. One of my roommates made a joke that I should build a device to track who is actually present in the apartment. So I did.</p>
<p>I was already using a form of this, where I would ping local phone IP addresses to tell who was there. If there was a response, their phone was connected to the wifi and the person was probably there. I just made this into a neat setup using a raspberry pi and 4 LEDs.</p>
<p>To start, I needed a way to ping people from python. Some quick searching led me to <a href="http://www.g-loaded.eu/2009/10/30/python-ping/"   target="_blank">ping.py (python-ping)</a>. This code implements an ICMP ping that python can use. From there, it&rsquo;s simple to import RPi.GPIO to control LED&rsquo;s and make them change depending on the ping status.</p>
<p>Most of the change is in verbose_ping. Before, it just printed the output of the ping with three possible states: error, timeout, or response with a time. I modified it so the first two states turn the LED off, and the last one turns it on.</p>
<p>Python function verbose_ping</p>
<p>It gets pin from a line in the main loop, which allows it to work with multiple LEDs and IPs. I had four people to track, so mine looks like this.</p>
<p>Main loop that assigns IPs to LEDs</p>
<p>Each IP has a GPIO pin assigned to it, which is connected to an LED. Every 10 seconds all the IPs are pinged, and the LEDs status is changed based on the result of the ping.</p>
<p>Now it is simple to tell who is in my apartment by looking at the LEDs. If their light is on, they are there. If their light is off, they are not there.</p>
<p>It worked well for it&rsquo;s purpose, with a few problems. iPhones only connect to wifi when the screen in on, so it only shows when iPhone users are using their phone. For androids it works as intended. It also doesn&rsquo;t work if the person leaves their phone at the apartment, or never turns on wifi.</p>
<p>Notes:</p>
<ul>
<li>My code has logging in it, but it&rsquo;s only for debugging.</li>
<li>This could be used to test a ping to any IP, not just local ones. Someone could build an alarm if their server goes down.</li>
<li>The <a href="https://bitbucket.org/pschow/rpi-led-iptracker/overview"   target="_blank">complete code is on Bitbucket.</a></li>
<li>The script needs to be run as sudo for the ping and GPIO access.</li>
</ul>

      </div>
    </section>
    <footer class="pt-8 max-w-prose print:hidden">
      
  <div class="flex">
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
          Author
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          Paul Schow
        </div>
      
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://twitter.com/weirdguy"
          target="_blank"
          aria-label="Twitter"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>

  </span>

</a
        >
      
    
  </div>

</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="group flex" href="/2013/08/monitoring-temperatures-using-raspberry.html">
              <span
                class="mr-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-2 text-neutral-700 transition-transform group-hover:translate-x-[2px] group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Monitoring Temperatures Using a Raspberry Pi and a MCP3208 ADC with Thermistors </span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2013-08-16 17:55:00 -0600 MDT">16 August 2013</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="group flex text-right" href="/2014/01/toolbox-boombox.html">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Toolbox Boombox</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2014-01-04 15:14:00.001 -0700 MST">4 January 2014</time>
                  
                </span>
              </span>
              <span
                class="ml-2 text-neutral-700 transition-transform group-hover:translate-x-[2px] group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        
          <div
            class="pointer-events-none absolute top-[100vh] bottom-0 w-12 ltr:right-0 rtl:left-0"
          >
            <a
              href="#the-top"
              class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
              aria-label="Scroll to top"
              title="Scroll to top"
            >
              &uarr;
            </a>
          </div>
        
      </main><footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://git.io/hugo-congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    
    
      <div
        class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
      >
        <button id="appearance-switcher" type="button">
          <div
            class="flex items-center justify-center w-12 h-12 dark:hidden"
            title="Switch to dark appearance"
          >
            

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


          </div>
          <div
            class="items-center justify-center hidden w-12 h-12 dark:flex"
            title="Switch to light appearance"
          >
            

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


          </div>
        </button>
      </div>
    
  </div>
  
  
</footer>

    </div>
  </body>
</html>
